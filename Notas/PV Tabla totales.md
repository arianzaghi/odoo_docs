> [[PV Tabla totales]]

Tags: 
Status: 
Related: 

___

# PV Tabla totales

## Llamada a la plantilla
`report_saleorder_document`
> En el documento de `saleorder` se llama a la plantilla de la tabla de totales
```xml
<template id="report_saleorder_document">
	<t t-set="tax_totals" t-value="doc.tax_totals"/>  
	<t t-call="sale.document_tax_totals"/>
</template>
```

`report_saleorder_document`
> Este es el template que hereda y hace lo que `account.document_tax...`
```xml
<template id="document_tax_totals" inherit_id="account.document_tax_totals_template" primary="True"></template>
```

`addons/account/views/report_invoice.xml`
> La tabla de totales esta realmente en `account_move`
```xml
<template id="document_tax_totals_template">  
    <!--  
        Generic template to display tax totals in pdf reports.        Used by invoices, SO and PO.  
        ARGUMENTS:        - tax_totals: dict in the form generated by account.move's _get_tax_totals.    -->    <t t-foreach="tax_totals.get('subtotals')" t-as="subtotal">  
        <tr class="border-black o_subtotal">  
            <td><strong t-out="subtotal['name']">Untaxed Amount</strong></td>  
  
            <td class="text-end">  
                <span  
                    t-att-class="oe_subtotal_footer_separator"  
                    t-out="subtotal['formatted_amount']"  
                >27.00</span>  
            </td>  
        </tr>  
  
        <t t-set="subtotal_to_show" t-value="subtotal['name']"/>  
        <t t-call="account.tax_groups_totals"/>  
    </t>  
  
    <tr t-if="'formatted_rounding_amount' in tax_totals and tax_totals.get('rounding_amount') != 0">  
        <td>Rounding</td>  
        <td class="text-end">  
            <span t-out="tax_totals.get('formatted_rounding_amount')">0</span>  
        </td>  
    </tr>  
      
    <!--Total amount with all taxes-->  
    <tr class="border-black o_total">  
        <td><strong>Total</strong></td>  
        <td  class="text-end">  
            <span t-out="tax_totals.get('formatted_amount_total')">31.05</span>  
        </td>  
    </tr>  
</template>
```